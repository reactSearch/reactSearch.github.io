<!DOCTYPE html>
   <html lang="en">
     <head>
       <title>Page title</title>
       <meta name="viewport" content="width=device-width, initial-scale=1">
       <link href="bs/css/bootstrap.min.css" rel="stylesheet">
       <link href="bs/css/bootstrap-theme.min.css" rel="stylesheet">
       <script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
       <script type="text/javascript" src="bs/js/bootstrap.min.js"></script>
       <script type="text/javascript" src='js/jsoneditor.js'></script>
 </head>
 <body>
   <div class='container'>
       <div class='row'>
           <div class='span12 col-md-12 columns twelve large-12'>

               <h2>reactSearch Database GUI</h2>
               <p>Below is the editor generated from the JSON Schema with the help from <a href="https://github.com/jdorn/json-editor">json-editor</a> by <a href="https://github.com/jdorn">@jdorn</a>.</p>

               <div id='editor'></div>
               <button id="submit" class="btn btn-success" type="submit">Add reaction</button>
               <br><br><br>
               <p>Resulting JSON. TODO: automatic pasting into the database</p>
               <textarea id='output' style='width: 100%; height: 300px; font-family: monospace;' class='form-control'></textarea>
               <br><br>
           </div>
       </div>
   </div>

   <!-- Initializing the JSON form script -->
   <script>
    var editor = new JSONEditor(document.getElementById('editor'), {
      schema: {
          "title": "Add new reaction to the DB",
          "type": "object",
          "properties": {

            "reagents": {
              "type": "array",
              "format": "table",
              "title": "Initial reagents",
              "description": "Insert the PubChem IDs of the initial reagents (one at a time)",
              "uniqueItems": true,
              "items": {
                "type": "integer",
                "title": "reagent's PubChem ID"
              },
              "default": [
                0
              ],
              "options": {
                "disable_array_delete_last_row": true
              }
            },

            "products": {
              "type": "array",
              "format": "table",
              "title": "Resulting products",
              "description": "Insert the PubChem IDs of the final products (one at a time); this is used for the reaction searching and identifying!",
              "uniqueItems": true,
              "items": {
                "type": "integer",
                "title": "product's PubChem ID"
              },
              "default": [
                0
              ],
              "options": {
                "disable_array_delete_last_row": true
              }
            },

            "reactionImageLink": {
              "type": "string",
              "description": "Reaction overview image link (chemical equation image), preferably in PNG. EXAMPLE: https://raw.github.com/mawansui/reactions/id0.png"
            },

            "conditions": {
              "type": "string",
              "description": "Conditions at which the reaction takes place. EXAMPLE: 20 deg C, 101.3 kPa"
            },

            "catalysts": {
              "type": "string",
              "description": "What catalyses the reaction?"
            },

            "procedure": {
              "type": "string",
              "format": "textarea",
              "description": "TODO: Add a markdown editor"
            }
          }
        },
        theme: 'bootstrap3',
        disable_collapse: 'true',
        disable_edit_json: 'true',
        disable_properties: 'true',
        disable_array_reorder: 'true'
    });

    document.getElementById('submit').addEventListener('click', function() {
      console.log(editor.getValue());
      var display = document.getElementById('output');
      var finaljson = editor.getValue();
      display.value = JSON.stringify(finaljson);
    });
   </script>

 </body>
</html>
